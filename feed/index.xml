<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Alex Gibson, Front End Developer</title>
 <link href="http://alxgbsn.co.uk/feed/" rel="self"/>
 <link href="http://alxgbsn.co.uk/"/>
 <updated>2012-06-25T21:25:36+01:00</updated>
 <id>http://alxgbsn.co.uk/</id>
 <author>
   <name>Alex Gibson</name>
   <email>alxgbsn@gmail.com</email>
 </author>

 
 <entry>
   <title>Serving iOS retina startup images for the new iPad</title>
   <link href="http://alxgbsn.co.uk/2012/03/28/Serving-iOS-retina-startup-images-for-the-new-iPad"/>
   <updated>2012-03-28T00:00:00+01:00</updated>
   <id>http://alxgbsn.co.uk/2012/03/28/Serving-iOS-retina-startup-images-for-the-new-iPad</id>
   <content type="html">&lt;p&gt;In the past we have touched on how to serve iOS startup images for full screen web apps using both &lt;a href=&quot;http://miniapps.co.uk/blog/post/ios-startup-images-using-css-media-queries/&quot;&gt;CSS media queries and JavaScript&lt;/a&gt; techniques. Now that the latest iPad sports a retina calibre display, we must again look at the best way to serve startup images in our web apps.&lt;/p&gt;

&lt;p&gt;Given the potential bandwidth cost incurred by downloading such large images (2048 x 1496 landscape, 1536 x 2006 portrait), the most advisable technique is to use JavaScript to serve only the assets a device requires (rather than downloading every asset, which would happen if we used media queries). This can be done using the following code snippet in the &lt;head&gt; of your page.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script&amp;gt;(function(){
var p, l, r = window.devicePixelRatio;
if (navigator.platform === &quot;iPad&quot;) {
    p = r === 2 ? &quot;img/startup-tablet-portrait-retina.png&quot; : &quot;img/startup-tablet-portrait.png&quot;;
    l = r === 2 ? &quot;img/startup-tablet-landscape-retina.png&quot; : &quot;img/startup-tablet-landscape.png&quot;;
    document.write('&amp;lt;link rel=&quot;apple-touch-startup-image&quot; href=&quot;' + l + '&quot; media=&quot;screen and (orientation: landscape)&quot;/&amp;gt;&amp;lt;link rel=&quot;apple-touch-startup-image&quot; href=&quot;' + p + '&quot; media=&quot;screen and (orientation: portrait)&quot;/&amp;gt;');
} else {
    p = r === 2 ? &quot;img/startup-retina.png&quot;: &quot;img/startup.png&quot;; 
    document.write('&amp;lt;link rel=&quot;apple-touch-startup-image&quot; href=&quot;' + p + '&quot;/&amp;gt;');
}
})()&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It would be nice if Apple would provide a better way to do this rather than having to rely on JavaScript. Perhaps in the future we will be able to have the option to use vector formats, such as SVG for startup images?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tap.js - A lightweight 'tap' event JavaScript plugin</title>
   <link href="http://alxgbsn.co.uk/2012/03/12/Tap-js-A-lightweight-tap-event-JavaScript-plugin"/>
   <updated>2012-03-12T00:00:00+00:00</updated>
   <id>http://alxgbsn.co.uk/2012/03/12/Tap-js-A-lightweight-tap-event-JavaScript-plugin</id>
   <content type="html">&lt;p&gt;While the &lt;a href=&quot;http://www.w3.org/TR/touch-events/&quot;&gt;W3C touch events API&lt;/a&gt; is quite flexible in its low-level implementation for dealing with multi-touch interaction, it means that the higher level gestures we use daily in our web apps can take &lt;a href=&quot;http://miniapps.co.uk/blog/post/event-delegation-for-touch-events-in-javascript/&quot;&gt;quite a lot of work&lt;/a&gt; for developers to implement themselves, even down to the basic 'tap' event. Many mobile web frameworks already offer support for such gestures, but if your app does not use or require such a framework, something as simple as a 'tap' plugin can become a necessity on nearly every mobile project.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/alexgibson/tap.js&quot;&gt;Tap.js&lt;/a&gt; is a simple, lightweight plugin for a common 'tap' gesture. It has no dependencies and can be used just like any regular JavaScript event, along with standard event listener syntax. It also falls back to using regular mouse events when touch is not supported, so you don't need to manually feature detect or provide two different event types in your code.&lt;/p&gt;

&lt;h2&gt;Setup&lt;/h2&gt;

&lt;p&gt;First, include the main JavaScript file in the &lt;head&gt; of your HTML document:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script src=&quot;tap.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next create a new Tap instance, passing the element you want to use:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var el = document.getElementById('my-id'),
    myTap = new Tap(el);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can then start listening for 'tap' events using the regular JavaScript event listener syntax:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;el.addEventListener('tap', tapDidOccur, false); 
function tapDidOccur (e) {
    //your code
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can stop listening for tap events like so:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;el.removeEventListener('tap', tapDidOccur, false);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Tap.js is open source and available on &lt;a href=&quot;https://github.com/alexgibson/tap.js&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;Tested browsers&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;iOS Safari (5.1)&lt;/li&gt;
&lt;li&gt;Android default browser (2.3.5)&lt;/li&gt;
&lt;li&gt;Opera Mobile 11.50 (Android)&lt;/li&gt;
&lt;li&gt;BlackBerry Playbook (1.0.8.6067)&lt;/li&gt;
&lt;li&gt;HP webOS 2.1.0 (click fallback)&lt;/li&gt;
&lt;li&gt;All modern desktop browsers (click fallback)&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Different ways to trigger touchcancel in mobile browsers</title>
   <link href="http://alxgbsn.co.uk/2011/12/23/Different-ways-to-trigger-touchcancel-in-mobile-browsers"/>
   <updated>2011-12-23T00:00:00+00:00</updated>
   <id>http://alxgbsn.co.uk/2011/12/23/Different-ways-to-trigger-touchcancel-in-mobile-browsers</id>
   <content type="html">&lt;p&gt;The &lt;code&gt;touchcancel&lt;/code&gt; event is often neglected when building touch–interfaces using JavaScript. Historically, browsers vendors have never really published documentation detailing the circumstances as to when this event gets fired, and hence it has always been associated with a level of obscurity by many developers. The aim of this post is to try and shed some light on the matter.&lt;/p&gt;

&lt;p&gt;Apple originally created touch events for iOS Safari, which have since been adopted as a basis for the &lt;a href=&quot;http://www.w3.org/TR/2011/WD-touch-events-20110505/&quot;&gt;W3C Touch Events Specification&lt;/a&gt;. The original &lt;a href=&quot;http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html%23//apple_ref/doc/uid/TP40009358&quot;&gt;Safari DOM Additions Reference&lt;/a&gt; documentation provides very little information on &lt;code&gt;touchcancel&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Sent when the system cancels tracking for the touch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thankfully, the W3C Touch Events specification &lt;a href=&quot;http://www.w3.org/TR/2011/WD-touch-events-20110505/#the-touchcancel-event&quot;&gt;gives us a bit more detail&lt;/a&gt;, including some situations where the event should occur:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A user agent must dispatch this event type to indicate when a touch point has been disrupted in an implementation-specific manner, such as a synchronous event or action originating from the UA canceling the touch, or the touch point leaving the document window into a non-document area which is capable of handling user interactions. (e.g. The UA's native user interface, plug-ins) A user agent may also dispatch this event type when the user places more touch points on the touch surface than the device or implementation is configured to store, in which case the earliest Touch object in the TouchList should be removed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;From this description we can begin to understand &lt;code&gt;touchcancel&lt;/code&gt; with regard to browser behaviour a little better. It not only helps the browser keep accurate references to active &lt;code&gt;Touch&lt;/code&gt; objects in the &lt;code&gt;TouchList&lt;/code&gt;, but it can also be used by developers to carry out UI specific tasks, such as reseting any variables used during &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt;. In the event that the system cancels tracking and the &lt;code&gt;touchend&lt;/code&gt; event does not fire, &lt;code&gt;touchcancel&lt;/code&gt; saves the day.&lt;/p&gt;

&lt;p&gt;But when do browsers actually trigger this event? To start investigating, it was necessary to build a simple event logger to track all touch events. The test features a touch-area and logs the last touch event fired, making it easier to see exactly what kind of interactions result in a &lt;code&gt;touchcancel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What follows is a list of findings for various mobile web browsers. It is interesting to note that &lt;code&gt;touchcancel&lt;/code&gt; is not very predictable, especially on Android (2.3.5). But even on iOS5 you cannot always correctly guess what will trigger a &lt;code&gt;touchcancel&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;iOS Safari 5.0.1 (iPhone 4 &amp;amp; iPad 1)&lt;/h2&gt;

&lt;p&gt;Actions that do trigger touchcancel during a touchstart or touchmove event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User presses the home button.&lt;/li&gt;
&lt;li&gt;User presses the action button in Safari's bottom toolbar.&lt;/li&gt;
&lt;li&gt;User presses/smears the palm of their hand on the screen, creating no discernible single touch points (iPhone only?).&lt;/li&gt;
&lt;li&gt;User presses the lock button.&lt;/li&gt;
&lt;li&gt;User initiates a gesture using four or more simultaneous touch points on iPad and Multitasking Gestures are enabled in system preferences.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Actions that do not trigger &lt;code&gt;touchcancel&lt;/code&gt; during a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User presses the bookmark button in Safari's bottom toolbar.&lt;/li&gt;
&lt;li&gt;User presses the back or forward history buttons in Safari's bottom toolbar.&lt;/li&gt;
&lt;li&gt;User taps to focus on the Safari search bar.&lt;/li&gt;
&lt;li&gt;User rotate's the device orientation.&lt;/li&gt;
&lt;li&gt;Popup notification such as WiFi locator or Clock timer alert appears on screen.&lt;/li&gt;
&lt;li&gt;New iOS5 style notification appears at top of the screen.&lt;/li&gt;
&lt;li&gt;User opens a new tab (iPad).&lt;/li&gt;
&lt;li&gt;User refreshes the page.&lt;/li&gt;
&lt;li&gt;User presses the volume buttons.&lt;/li&gt;
&lt;li&gt;User switches the device onto silent/vibrate.&lt;/li&gt;
&lt;li&gt;User receives a phone call.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In some of these circumstances the browser will simply fire a &lt;code&gt;touchend&lt;/code&gt; instead of &lt;code&gt;touchcancel&lt;/code&gt;. In others situations (such as the old–style popup notifications), &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; will remain active (even while the content is hidden underneath the notification), until the user releases their finger, at which point &lt;code&gt;touchend&lt;/code&gt; is fired.&lt;/p&gt;

&lt;p&gt;Notable iOS5 system functions that will not activate during a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User cannot focus on the Safari address bar.&lt;/li&gt;
&lt;li&gt;User cannot open a new page (iPhone).&lt;/li&gt;
&lt;li&gt;User cannot double–tap the home button to open the app tray.&lt;/li&gt;
&lt;li&gt;User cannot swipe down from the top of screen to open notification centre.&lt;/li&gt;
&lt;li&gt;User cannot tap on a new iOS5 style notification when it appears at the top of the screen.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;Android 2.3.5 (Samsung Galaxy Y GT-S5363) stock browser&lt;/h2&gt;

&lt;p&gt;Actions that do trigger &lt;code&gt;touchcancel&lt;/code&gt; during a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User presses the lock button.&lt;/li&gt;
&lt;li&gt;Appears to fire randomly for no immediately obvious reason. This is especially noticeable when performing repeated quick taps and swipes.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Actions that do not trigger &lt;code&gt;touchcancel&lt;/code&gt; during a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User presses the home button.&lt;/li&gt;
&lt;li&gt;User rotate's the device orientation.&lt;/li&gt;
&lt;li&gt;User presses the volume buttons.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Notable Android 2.3.5 system functions that will not activate during a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt; event:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User cannot press the menu or back buttons.&lt;/li&gt;
&lt;li&gt;User cannot open notifications menu.&lt;/li&gt;
&lt;li&gt;User cannot focus on the browser address bar.&lt;/li&gt;
&lt;li&gt;User cannot tap the bookmarks button.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;Opera Mobile&lt;/h2&gt;

&lt;p&gt;Opera Mobile 11.50 for Android was also tested. While the browser appears to have support for &lt;code&gt;touchcancel&lt;/code&gt;, it does not actually seem to fire the event. In the case of pressing the home button for example, Opera Mobile appears to immediately fire &lt;code&gt;touchend&lt;/code&gt; instead.&lt;/p&gt;

&lt;h2&gt;BlackBerry Playbook (1.0.8.6067)&lt;/h2&gt;

&lt;p&gt;Even though the browser reportedly supports the &lt;code&gt;touchcancel&lt;/code&gt; event, it does not appear to get fired at all. Even when pressing the power button to put the device on standby, &lt;code&gt;touchcancel&lt;/code&gt; is not fired. The same goes for pressing browser tool bar buttons, or focusing on the address bar. It is also worth noting that when performing a &lt;code&gt;touchstart&lt;/code&gt; or &lt;code&gt;touchmove&lt;/code&gt;, the Playbook does not respond to any bevel swipe gestures.&lt;/p&gt;

&lt;h2&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;It is appears from the tests that &lt;code&gt;touchcancel&lt;/code&gt; is still a bit unpredictable. While it is easy enough to identify situations where it gets fired, there are often near identical situations where it does not. While the usefulness of this event is by no means in question, it seems like developers cannot yet rely on this event getting fired in all expected circumstances.&lt;/p&gt;

&lt;p&gt;What is clear though, is that you cannot rely on &lt;code&gt;touchend&lt;/code&gt; getting fired on every device. You need to write code that deals with &lt;code&gt;touchcancel&lt;/code&gt;. This is especially true on the iPad for example, say if you're building a multi–touch app or multi–player HTML5 game. Since there is no way of telling if the user has enabled Multitasking Gestures, your app needs to handle &lt;code&gt;touchcancel&lt;/code&gt; gracefully. The unpredictable nature of Android browser also demonstrates the importance of dealing with this event, as failure to do so will likely cause bugs in your UI.&lt;/p&gt;

&lt;p&gt;So, next time you're writing your own touch events, don't forget about &lt;code&gt;touchcancel&lt;/code&gt;. Despite the varying levels of browser support, it still comes in very handy when dealing with certain unexpected user interactions.&lt;/p&gt;
</content>
 </entry>
 
 
</feed>